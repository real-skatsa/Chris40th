<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chris's 40th â€” IDDQD Console</title>
<style>
  :root{
    --crt: #00ff66;
    --bg: #000000;
  }
  html, body {
    height: 100%;
  }
  body {
    margin: 0;
    background: var(--bg);
    color: var(--crt);
    font-family: "Courier New", Courier, monospace;
    line-height: 1.4;
    display: flex;
  }
  .wrap{
    width: 100%;
    max-width: 900px;
    margin: auto;
    padding: 24px;
  }
  pre {
    margin: 0;
    white-space: pre-wrap;
    word-break: break-word;
    font-size: clamp(14px, 3.8vw, 20px);
    text-shadow: 0 0 6px rgba(0,255,102,0.35);
  }
  .cursor {
    display: inline-block;
    width: 0.6em;
    animation: blink 1s steps(1) infinite;
  }
  @keyframes blink { 50% { opacity: 0; } }

  /* Progress bar */
  .bar-wrap {
    margin-top: 6px;
    width: 100%;
    max-width: 520px;
    border: 1px solid var(--crt);
    padding: 2px;
    box-shadow: 0 0 8px rgba(0,255,102,0.25) inset;
  }
  .bar {
    height: 14px;
    width: 0%;
    background: var(--crt);
    box-shadow: 0 0 8px rgba(0,255,102,0.65);
    transition: width 0.08s linear;
  }
  .pct {
    margin-top: 4px;
  }

  /* Optional subtle scanline effect */
  .scanlines {
    position: fixed;
    inset: 0;
    pointer-events: none;
    background: repeating-linear-gradient(
      to bottom,
      rgba(0,0,0,0) 0,
      rgba(0,0,0,0) 2px,
      rgba(0,0,0,0.06) 3px
    );
    mix-blend-mode: multiply;
  }
</style>
</head>
<body>
<div class="wrap">
  <pre id="console"></pre>
</div>
<div class="scanlines" aria-hidden="true"></div>
<script>
(function(){
  const pre = document.getElementById('console');

  // Utility: type text with a little delay
  function typeLine(text, speed = 28) {
    return new Promise(resolve => {
      let i = 0;
      const tick = () => {
        pre.textContent += text[i++];
        if (i < text.length) {
          setTimeout(tick, speed);
        } else {
          pre.textContent += "\\n";
          resolve();
        }
      };
      if (text.length === 0) { pre.textContent += "\\n"; resolve(); }
      else tick();
    });
  }

  function wait(ms){ return new Promise(r=>setTimeout(r, ms)); }

  function addProgressBar() {
    const w = document.createElement('div');
    const barWrap = document.createElement('div');
    const bar = document.createElement('div');
    const pct = document.createElement('div');
    barWrap.className = 'bar-wrap';
    bar.className = 'bar';
    pct.className = 'pct';
    w.appendChild(barWrap);
    barWrap.appendChild(bar);
    w.appendChild(pct);
    pre.appendChild(w);
    return {bar, pct};
  }

  async function run() {
    // Start at C:\ then move to DOOM, launch, show progress, then cheat.
    await typeLine("C:\\> cd doom");
    await wait(300);
    await typeLine("C:\\DOOM> doom.exe");
    await wait(250);

    // Loading text + progress bar
    await typeLine("Loading DOOM...");
    const {bar, pct} = addProgressBar();
    const duration = 3000; // ~3 seconds to 100%
    const start = performance.now();
    let raf;

    await new Promise(resolve => {
      const step = (now) => {
        const t = Math.min(1, (now - start) / duration);
        const p = Math.round(t * 100);
        bar.style.width = p + "%";
        pct.textContent = " " + p + "%";
        if (t < 1) {
          raf = requestAnimationFrame(step);
        } else {
          resolve();
        }
      };
      raf = requestAnimationFrame(step);
    });

    // Small spacing line after progress
    pre.textContent += "\\n";
    await wait(250);

    await typeLine("C:\\DOOM> IDDQD"); // Using authentic DOOM code
    await wait(250);
    await typeLine("Degreelessness mode on");
    await wait(250);
    await typeLine("C:\\DOOM> echo God mode activated at Chris's 40th birthday.");
    await wait(120);
    await typeLine("God mode activated at Chris's 40th birthday.");
    await wait(250);

    // Blinking cursor
    const cur = document.createElement('span');
    cur.className = 'cursor';
    cur.textContent = "_";
    pre.appendChild(cur);
  }

  run();
})();
</script>
</body>
</html>
