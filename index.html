<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chris's 40th – IDDQD Console</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root{
    --green: #00ff66;
    --gold:  #ffcc00;
    --bg:    #000000;
  }
  html, body { height: 100%; }
  body {
    margin: 0;
    background: var(--bg);
    color: var(--green);
    font-family: "Courier New", monospace;
    font-size: 18px;
    line-height: 1.6;
    padding: 40px;
  }
  pre {
    margin: 0;
    white-space: pre-wrap;
    word-break: break-word;
    text-shadow: 0 0 6px rgba(0,255,102,0.4);
  }
  .cursor { animation: blink 1s steps(1) infinite; }
  @keyframes blink { 50% { opacity: 0; } }

  .gold {
    color: var(--gold);
    text-shadow: 0 0 8px rgba(255,204,0,0.6);
  }

  /* Centered, responsive image */
  .poster {
    display: block;
    margin: 24px auto;
    max-width: 90%;
    width: 700px;
    height: auto;
    border: 1px solid var(--green);
    box-shadow: 0 0 8px rgba(0,255,102,0.25);
    opacity: 0;
    transform: translateY(6px);
    transition: opacity 800ms ease, transform 800ms ease;
  }
  .poster.show {
    opacity: 1;
    transform: translateY(0);
  }
</style>
</head>
<body>
<pre id="console"></pre>

<script>
const pre = document.getElementById("console");

function sleep(ms){ return new Promise(r=>setTimeout(r, ms)); }

async function typeText(text, speed = 50) {
  for (let i = 0; i < text.length; i++) {
    pre.innerHTML += text[i];
    await sleep(speed);
  }
}

async function newLine(delay = 400) {
  pre.innerHTML += "<br>";
  await sleep(delay);
}

// Extended 6-second progress bar: overwrites percentage on same line
async function progressBar() {
  // Ensure we start with 0% at the end of the current line
  pre.innerHTML += "0%";
  for (let i = 2; i <= 100; i += 2) {
    pre.innerHTML = pre.innerHTML.replace(/\d{1,3}%$/, "") + i + "%";
    await sleep(120); // 100% * 120ms ≈ 6s
  }
}

async function run() {
  await typeText("C:\\> cd doom");
  await newLine(); await newLine();

  await typeText("C:\\DOOM> doom.exe");
  await newLine(); await newLine();

  await typeText("Loading DOOM... ");
  await progressBar();   // ~6 seconds
  await newLine(); await newLine();

  await typeText("> IDDQD");
  await newLine();
  await typeText("........ INITIALISING ........");
  await newLine(); await newLine();

  // Gold final message
  const goldText = document.createElement("span");
  goldText.className = "gold";
  goldText.textContent = ": God mode activated at Chris's 40th birthday";
  pre.appendChild(goldText);

  // Line breaks then image element (centered, fades in)
  pre.innerHTML += "<br><br>";
  const img = document.createElement("img");
  img.className = "poster";
  img.alt = "Doom themed poster";
  img.src = "https://pbs.twimg.com/media/GgsQO4YX0AAyEFG.jpg";
  pre.appendChild(img);

  // Wait a beat, then reveal image with fade-in
  await sleep(300);
  img.classList.add("show");

  // Blinking underscore cursor at the very end
  const cursor = document.createElement("span");
  cursor.className = "cursor";
  cursor.textContent = "_";
  pre.appendChild(cursor);
}

run();
</script>
</body>
</html>
